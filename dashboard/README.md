# Boston Licensing Board Dashboard

> **‚ö†Ô∏è Active Development Area**: This dashboard is actively evolving with new features and improvements being added regularly. Expect frequent updates as we expand visualization capabilities and user interactions.

An interactive Streamlit web application for exploring and analyzing Boston Licensing Board data. The dashboard provides search, filtering, and visualization tools to understand licensing trends across Boston neighborhoods.

View the dashboard at [boston-liquor-licenses.streamlit.app](https://boston-liquor-licenses.streamlit.app/).

## üéØ Purpose

This dashboard transforms the structured licensing data (extracted by the [transform](../transform) pipeline) into an accessible, interactive interface for:

- **Community Organizations**: Track licensing patterns in specific neighborhoods
- **Researchers**: Analyze alcohol license distribution and trends over time
- **Business Owners**: Research the competitive landscape and licensing requirements
- **City Officials**: Monitor licensing board activity and outcomes

## ‚ú® Current Features

### üì• Data Export

Download the complete dataset as an Excel file for offline analysis, custom reporting, or integration with other tools.

### üîç Business Search

Two-mode search system for looking up license information:

#### **Business Name Search**
- Search by business name or DBA ("Doing Business As") name
- Case-insensitive partial matching
- Bulk lookup: enter multiple businesses (one per line)
- Results show all matching licenses

#### **License Number Search**
- Direct lookup by license number (e.g., `LB-123456`)
- Exact matching (case-insensitive)
- Bulk lookup: enter multiple license numbers (one per line)
- Fast retrieval for known license IDs

**Search Results Display:**
- Found vs. Not Found tracking
- Interactive table with sortable columns
- Click any row to view full license details in JSON format
- Hidden columns (address, entity_number, etc.) shown only in detail view

### üìä License Analytics

Analyze granted licenses with interactive date filtering and geographic visualizations.

#### **Summary Metrics**
Three key metrics updated in real-time based on filters:
- Total granted licenses in selected date range
- Number of unique zipcodes represented
- Count of distinct alcohol license types

#### **Date Range Filtering**
Interactive slider to select meeting date ranges:
- Filters all charts and metrics dynamically
- Defaults to full date range in dataset
- Based on `minutes_date` field from meeting minutes

#### **Zipcode Analysis**

The dashboard focuses on two predefined zipcode groups for targeted neighborhood analysis:

**Targeted Zipcodes** (13 areas):
- `02126, 02121, 02119, 02124, 02136, 02125, 02122, 02118, 02128, 02131, 02130, 02129, 02132`

**Non-Targeted Zipcodes** (15 areas):
- `02111, 02120, 02134, 02115, 02199, 02215, 02116, 02114, 02127, 02108, 02210, 02109, 02113, 02110, 02128`

Each group displays a **stacked bar chart** showing:
- X-axis: Zipcode
- Y-axis: License count
- Stacks: Broken down by alcohol type (All Alcohol, Beer & Wine, etc.)

#### **Temporal Trends**

**Granted Licenses by Meeting** chart shows licensing activity over time:
- X-axis: Meeting date
- Y-axis: Number of licenses granted
- Helps identify seasonal patterns and policy changes

## üöÄ Setup & Usage

### Prerequisites

- **Python 3.13+**
- **uv** (recommended) or standard `pip`
- **Data file**: `../data/licenses.xlsx` must exist (generated by the transform pipeline)

### Installation

```bash
# Navigate to dashboard directory
cd dashboard

# Create virtual environment (if not already created)
uv venv

# Activate environment
source .venv/bin/activate  # macOS/Linux
# or
.venv\Scripts\activate     # Windows

# Install dependencies
uv pip install -e .
# or with pip:
# pip install -e .
```

### Running the Dashboard

```bash
streamlit run app.py
```

The dashboard will open automatically in your browser at `http://localhost:8501`.

### Updating Data

The dashboard reads from `../data/licenses.xlsx`. To refresh the data:

1. Run the [transform pipeline](../transform) to regenerate `licenses.xlsx`
2. Restart the Streamlit app (or use the "Rerun" button if auto-reload is enabled)

Streamlit caches the data using `@st.cache_data`, so the initial load is fast and subsequent interactions are instant.

## üìÅ Project Structure

```
dashboard/
‚îú‚îÄ‚îÄ app.py              # Main Streamlit application
‚îú‚îÄ‚îÄ pyproject.toml      # Dependencies and project metadata
‚îú‚îÄ‚îÄ uv.lock             # Locked dependency versions
‚îú‚îÄ‚îÄ .venv/              # Virtual environment (created locally)
‚îî‚îÄ‚îÄ README.md           # This file
```

## üèóÔ∏è Architecture

The dashboard follows a modular, function-based design:

### Data Layer

- **`load_data()`**: Cached data loader with preprocessing
  - Converts `minutes_date` to datetime objects
  - Normalizes zipcodes to 5-digit zero-padded strings
  - Returns empty DataFrame with error message if file missing

### UI Components (Render Functions)

- **`render_download_section()`**: Excel download button
- **`render_business_search(df)`**: Search interface and results display
- **`render_analysis_section(df)`**: Charts and metrics container
  - **`filter_by_date(chart_df)`**: Date range slider and filtering logic
  - **`render_metrics(charts_df)`**: Summary statistics cards
  - **`render_zipcode_charts(charts_df)`**: Targeted and non-targeted zipcode visualizations
  - **`render_meeting_chart(charts_df)`**: Temporal trend line

### Configuration

**Constants** (defined at module level):
- `BASE_DIR`: Resolves to project root directory
- `DATA_PATH`: Points to `../data/licenses.xlsx`
- `TARGETED_ZIPCODES`: List of 13 focus zipcodes
- `NON_TARGETED_ZIPCODES`: List of 15 comparison zipcodes

## üîß Technical Details

### Dependencies

| Package | Purpose |
|:--------|:--------|
| `streamlit` | Web app framework |
| `pandas` | Data manipulation and analysis |
| `openpyxl` | Excel file reading |

See [pyproject.toml](./pyproject.toml) for full dependency specifications.

### Data Schema Assumptions

The dashboard expects the following columns in `licenses.xlsx`:

| Column | Type | Used For |
|:-------|:-----|:---------|
| `minutes_date` | datetime | Date filtering, temporal charts |
| `business_name` | string | Business search |
| `dba_name` | string | Business search (alternative name) |
| `license_number` | string | License lookup |
| `zipcode` | string | Geographic analysis |
| `alcohol_type` | string | Chart categorization |
| `status` | string | Filtering (granted/active licenses) |

**Note**: The app gracefully handles missing columns with informative error messages.

### UI Layout Strategy

The dashboard uses a **vertical layout** (no sidebar) to maximize chart visibility:

1. **Header** + Download button
2. **Business Search** section (independent)
3. **Divider**
4. **Analytics Section**:
   - Date range slider (controls all charts below)
   - Summary metrics
   - Zipcode charts (targeted + non-targeted)
   - Meeting trend chart

Search operates independently from charts‚Äîfiltering one does not affect the other.

## üöß Active Development & Future Plans

This dashboard is under **active development**. Recent additions include:

- ‚úÖ Bulk lookup for business names and license numbers
- ‚úÖ Found/Not Found differentiation in search results
- ‚úÖ Interactive row selection with detailed JSON view
- ‚úÖ Separate targeted vs. non-targeted zipcode analysis

### Planned Enhancements

**High Priority:**
- **Map Visualization**: Geographic distribution of licenses on an interactive Boston map
- **Advanced Filters**: Filter by attorney, manager, alcohol type, license status
- **Export Search Results**: Download filtered results as CSV/Excel
- **Trend Comparisons**: Compare license activity year-over-year

**Under Consideration:**
- **License Status Tracking**: Visualize denied, pending, and withdrawn applications
- **Attorney/Manager Analytics**: Most active attorneys, recurring managers
- **Neighborhood Profiles**: Deep-dive views for individual zipcodes with demographic data
- **Time-Series Analysis**: Moving averages, seasonal decomposition
- **Search History**: Save and revisit previous searches

### Known Limitations

- Zipcode groups are **hardcoded**‚Äîno UI to customize groupings
- Charts use Streamlit's native `st.bar_chart`, limiting customization
- No authentication or user-specific views
- Large datasets (>10k records) may experience slight lag on initial load

### Contributing

This is an area of active experimentation! Contributions are especially welcome for:

- New chart types and visualizations
- Performance optimizations for large datasets
- UI/UX improvements
- Mobile responsiveness enhancements

See the main [project README](../README.md) for contribution guidelines.

## üêõ Troubleshooting

### "Data file not found" Error

**Problem**: Dashboard shows error on load.

**Solution**:
1. Ensure `../data/licenses.xlsx` exists
2. Run the transform pipeline: `cd ../transform && make run`
3. Verify file path in `app.py` at line 14 (`DATA_PATH`)

### Charts Not Updating After Date Filter

**Problem**: Date slider doesn't affect charts.

**Solution**: This is expected behavior‚Äîclick "Rerun" in the top-right corner of Streamlit, or refresh the page.

### Blank Charts

**Problem**: Charts show "No data available" message.

**Solution**:
- Check that the filtered date range contains data
- Verify `status` field includes "granted" or "active" values
- Ensure `zipcode` values match the predefined lists

## üìÑ License

This project is part of the [Code for Boston](https://www.codeforboston.org/) Licensing Board Minutes initiative and is available under the MIT License.

---

**Questions or Feature Requests?** Open an issue on GitHub or join us at a Code for Boston meeting!
